<div class="page-container">
  <div class="page-header">
    <div class="header-content">
      <div class="header-title">
        <span class="icon">๐</span>
        <h1>ููุฒุงู ุงููุฑุงุฌุนุฉ</h1>
      </div>
      <p class="header-subtitle">ุนุฑุถ ุฃุฑุตุฏุฉ ุงูุญุณุงุจุงุช ูุงูุชุญูู ูู ุชูุงุฒู ุงููููุฏ ุงููุญุงุณุจูุฉ</p>
    </div>
  </div>

  <div class="content-area">
    <!-- ุงูููุงุชุฑ -->
    <div class="filters-card">
      <div class="filters-row">
        <div class="filter-group">
          <label>ูู ุชุงุฑูุฎ</label>
          <input type="date" [(ngModel)]="startDate" class="form-control">
        </div>
        <div class="filter-group">
          <label>ุฅูู ุชุงุฑูุฎ</label>
          <input type="date" [(ngModel)]="endDate" class="form-control">
        </div>
        <div class="filter-group">
          <label>ุญุงูุฉ ุงูุชุฑุญูู</label>
          <select [(ngModel)]="postingStatus" class="form-control">
            <option value="all">ุงููู (ุงููุฑุญูู ูุบูุฑ ุงููุฑุญูู)</option>
            <option value="posted">ุงููุฑุญูู ููุท</option>
            <option value="unposted">ุบูุฑ ุงููุฑุญูู ููุท</option>
          </select>
        </div>
        <div class="filter-actions">
          <button (click)="loadReport()" class="btn btn-primary">
            ๐ ุนุฑุถ ุงูุชูุฑูุฑ
          </button>
          <button (click)="resetFilters()" class="btn btn-secondary">
            โบ ุฅุนุงุฏุฉ ุชุนููู
          </button>
        </div>
      </div>
    </div>

    <!-- ุงูุชูุฑูุฑ -->
    <div class="report-card" *ngIf="report && !loading">
      <div class="report-actions no-print">
        <button (click)="printReport()" class="btn btn-secondary">
          ๐จ๏ธ ุทุจุงุนุฉ
        </button>
        <button (click)="exportToExcel()" class="btn btn-success">
          ๐ ุชุตุฏูุฑ Excel
        </button>
      </div>

      <!-- ุญุงูุฉ ุงูุชูุงุฒู -->
      <div class="balance-status" [class.balanced]="report.isBalanced" [class.unbalanced]="!report.isBalanced">
        <span class="status-icon">{{ report.isBalanced ? 'โ' : 'โ๏ธ' }}</span>
        <span class="status-text">
          {{ report.isBalanced ? 'ุงูููุฒุงู ูุชูุงุฒู' : 'ุงูููุฒุงู ุบูุฑ ูุชูุงุฒู - ููุฌุฏ ูุฑู: ' + report.difference.toFixed(2) + ' ุฑูุงู' }}
        </span>
      </div>

      <!-- ุงูุฌุฏูู -->
      <div class="table-container">
        <table class="report-table">
          <thead>
            <tr>
              <th>ุฑูู ุงูุญุณุงุจ</th>
              <th>ุงุณู ุงูุญุณุงุจ</th>
              <th class="number-col">ุงููุฏูู</th>
              <th class="number-col">ุงูุฏุงุฆู</th>
              <th class="number-col">ุงูุฑุตูุฏ</th>
              <th>ููุน ุงูุฑุตูุฏ</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of report.items">
              <td class="code-col">{{ item.accountCode }}</td>
              <td class="name-col">{{ item.accountName }}</td>
              <td class="number-col">{{ item.debit.toFixed(2) }}</td>
              <td class="number-col">{{ item.credit.toFixed(2) }}</td>
              <td class="number-col">{{ item.balance.toFixed(2) }}</td>
              <td class="balance-type">
                <span class="badge" [class.badge-debit]="item.balanceType === 'debit'" [class.badge-credit]="item.balanceType === 'credit'">
                  {{ item.balanceType === 'debit' ? 'ูุฏูู' : 'ุฏุงุฆู' }}
                </span>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="2" class="total-label">ุงูุฅุฌูุงูู</td>
              <td class="number-col total-value">{{ report.totalDebit.toFixed(2) }}</td>
              <td class="number-col total-value">{{ report.totalCredit.toFixed(2) }}</td>
              <td colspan="2"></td>
            </tr>
          </tfoot>
        </table>
      </div>

      <!-- ููุฎุต -->
      <div class="summary-section">
        <div class="summary-item">
          <span class="summary-label">ุฅุฌูุงูู ุงููุฏูู:</span>
          <span class="summary-value debit">{{ report.totalDebit.toFixed(2) }} ุฑูุงู</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">ุฅุฌูุงูู ุงูุฏุงุฆู:</span>
          <span class="summary-value credit">{{ report.totalCredit.toFixed(2) }} ุฑูุงู</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">ุงููุฑู:</span>
          <span class="summary-value" [class.error]="!report.isBalanced">{{ report.difference.toFixed(2) }} ุฑูุงู</span>
        </div>
      </div>
    </div>

    <!-- ุญุงูุฉ ุงูุชุญููู -->
    <div class="loading-state" *ngIf="loading">
      <div class="spinner"></div>
      <p>ุฌุงุฑู ุชุญููู ุงูุชูุฑูุฑ...</p>
    </div>

    <!-- ุญุงูุฉ ุงูุฎุทุฃ -->
    <div class="error-state" *ngIf="error && !loading">
      <div class="error-icon">โ๏ธ</div>
      <h3>ุญุฏุซ ุฎุทุฃ</h3>
      <p>{{ error }}</p>
      <button (click)="loadReport()" class="btn btn-primary">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
    </div>

    <!-- ุญุงูุฉ ูุงุฑุบุฉ -->
    <div class="empty-state" *ngIf="!report && !loading && !error">
      <div class="empty-icon">๐</div>
      <h3>ูุง ุชูุฌุฏ ุจูุงูุงุช</h3>
      <p>ูุง ุชูุฌุฏ ูููุฏ ูุญุงุณุจูุฉ ูู ุงููุชุฑุฉ ุงููุญุฏุฏุฉ</p>
    </div>
  </div>
</div>
