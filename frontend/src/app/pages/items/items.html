<div class="items-page">
  <div class="page-header">
    <div class="header-content">
      <h1>๐ฆ ุงูุฃุตูุงู</h1>
      <p class="subtitle">ุฅุฏุงุฑุฉ ุฃุตูุงู ุงููุฎุฒูู</p>
    </div>
  </div>

  <div class="toolbar">
    <div class="filters">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="filterItems()"
          placeholder="ุงูุจุญุซ ูู ุงูุฃุตูุงู..."
          class="search-input"
        />
        <span class="search-icon">๐</span>
      </div>
      <select [(ngModel)]="selectedCategory" (change)="filterByCategory()" class="category-filter">
        <option value="">ุฌููุน ุงููุฆุงุช</option>
        <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
      </select>
    </div>
    <button class="btn-primary" (click)="openModal()">
      โ ุฅุถุงูุฉ ุตูู
    </button>
  </div>

  <div class="items-grid" *ngIf="filteredItems.length > 0">
    <div class="item-card" *ngFor="let item of filteredItems">
      <div class="card-header">
        <div class="card-title">
          <h3>{{ item.name }}</h3>
          <span class="code-badge">{{ item.code }}</span>
        </div>
        <div class="card-actions">
          <button class="btn-icon" (click)="openModal(item)" title="ุชุนุฏูู">โ๏ธ</button>
          <button class="btn-icon" (click)="deleteItem(item.id)" title="ุญุฐู">๐๏ธ</button>
        </div>
      </div>
      
      <div class="card-body">
        <div class="info-grid">
          <div class="info-item" *ngIf="item.category">
            <span class="icon">๐ท๏ธ</span>
            <span class="label">ุงููุฆุฉ:</span>
            <span class="value">{{ item.category }}</span>
          </div>
          <div class="info-item" *ngIf="item.unitId">
            <span class="icon">๐</span>
            <span class="label">ุงููุญุฏุฉ:</span>
            <span class="value">{{ getUnitName(item.unitId) }}</span>
          </div>
          <div class="info-item" *ngIf="item.unitPrice">
            <span class="icon">๐ต</span>
            <span class="label">ุงูุณุนุฑ:</span>
            <span class="value">{{ item.unitPrice | number:'1.2-2' }} ุฑ.ู</span>
          </div>
          <div class="info-item" *ngIf="item.minStockLevel">
            <span class="icon">โ๏ธ</span>
            <span class="label">ุงูุญุฏ ุงูุฃุฏูู:</span>
            <span class="value">{{ item.minStockLevel | number:'1.0-2' }}</span>
          </div>
        </div>
        
        <p class="description" *ngIf="item.description">{{ item.description }}</p>
        
        <div class="card-footer">
          <span 
            class="status-badge" 
            [class.active]="item.isActive"
            [class.inactive]="!item.isActive"
            (click)="toggleStatus(item)"
          >
            {{ item.isActive ? 'ูุดุท' : 'ุบูุฑ ูุดุท' }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="filteredItems.length === 0">
    <div class="empty-icon">๐ฆ</div>
    <h3>ูุง ุชูุฌุฏ ุฃุตูุงู</h3>
    <p>ูู ุจุฅุถุงูุฉ ุฃูู ุตูู ูููุฎุฒูู</p>
    <button class="btn-primary" (click)="openModal()">ุฅุถุงูุฉ ุตูู</button>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ isEditMode ? 'ุชุนุฏูู ุตูู' : 'ุฅุถุงูุฉ ุตูู ุฌุฏูุฏ' }}</h2>
      <button class="btn-close" (click)="closeModal()">โ</button>
    </div>
    
    <div class="modal-body">
      <div class="form-row">
        <div class="form-group">
          <label>ุงุณู ุงูุตูู *</label>
          <input type="text" [(ngModel)]="currentItem.name" placeholder="ูุซุงู: ุตุงุฌ ุญุฏูุฏ 2ูู" />
        </div>

        <div class="form-group">
          <label>ุงูููุฏ *</label>
          <input type="text" [(ngModel)]="currentItem.code" placeholder="ูุซุงู: ITEM-001" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>ุงููุฆุฉ</label>
          <select [(ngModel)]="currentItem.category">
            <option value="">ุงุฎุชุฑ ูุฆุฉ...</option>
            <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
          </select>
        </div>

        <div class="form-group">
          <label>ุงููุญุฏุฉ</label>
          <select [(ngModel)]="currentItem.unitId">
            <option [value]="undefined">ุงุฎุชุฑ ูุญุฏุฉ...</option>
            <option *ngFor="let unit of units" [value]="unit.id">{{ unit.name }}</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label>ุงูุญุณุงุจ ุงููุฑุชุจุท</label>
        <select [(ngModel)]="currentItem.accountId">
          <option [value]="undefined">ุงุฎุชุฑ ุญุณุงุจ...</option>
          <option *ngFor="let account of accounts" [value]="account.id">
            {{ account.code }} - {{ account.name }}
          </option>
        </select>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>ุณุนุฑ ุงููุญุฏุฉ</label>
          <input type="number" [(ngModel)]="currentItem.unitPrice" step="0.01" placeholder="0.00" />
        </div>

        <div class="form-group">
          <label>ุงูุญุฏ ุงูุฃุฏูู ูููุฎุฒูู</label>
          <input type="number" [(ngModel)]="currentItem.minStockLevel" step="0.01" placeholder="0.00" />
        </div>

        <div class="form-group">
          <label>ุงูุญุฏ ุงูุฃูุตู ูููุฎุฒูู</label>
          <input type="number" [(ngModel)]="currentItem.maxStockLevel" step="0.01" placeholder="0.00" />
        </div>
      </div>

      <div class="form-group">
        <label>ุงููุตู</label>
        <textarea [(ngModel)]="currentItem.description" rows="3" placeholder="ูุตู ุงูุตูู..."></textarea>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="currentItem.isActive" />
          <span>ูุดุท</span>
        </label>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeModal()">ุฅูุบุงุก</button>
      <button class="btn-primary" (click)="saveItem()">
        {{ isEditMode ? 'ุชุญุฏูุซ' : 'ุญูุธ' }}
      </button>
    </div>
  </div>
</div>
