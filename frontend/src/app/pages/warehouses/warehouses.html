<div class="warehouses-page">
  <div class="page-header">
    <div class="header-content">
      <h1>๐ญ ุงููุฎุงุฒู</h1>
      <p class="subtitle">ุฅุฏุงุฑุฉ ุงููุฎุงุฒู ูุงููุณุชูุฏุนุงุช</p>
    </div>
  </div>

  <div class="toolbar">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="filterWarehouses()"
        placeholder="ุงูุจุญุซ ูู ุงููุฎุงุฒู..."
        class="search-input"
      />
      <span class="search-icon">๐</span>
    </div>
    <button class="btn-primary" (click)="openModal()">
      โ ุฅุถุงูุฉ ูุฎุฒู
    </button>
  </div>

  <div class="warehouses-grid" *ngIf="filteredWarehouses.length > 0">
    <div class="warehouse-card" *ngFor="let warehouse of filteredWarehouses">
      <div class="card-header">
        <div class="card-title">
          <h3>{{ warehouse.name }}</h3>
          <span class="code-badge">{{ warehouse.code }}</span>
        </div>
        <div class="card-actions">
          <button class="btn-icon" (click)="openModal(warehouse)" title="ุชุนุฏูู">โ๏ธ</button>
          <button class="btn-icon" (click)="deleteWarehouse(warehouse.id)" title="ุญุฐู">๐๏ธ</button>
        </div>
      </div>
      
      <div class="card-body">
        <div class="info-grid">
          <div class="info-item" *ngIf="warehouse.location">
            <span class="icon">๐</span>
            <span class="label">ุงููููุน:</span>
            <span class="value">{{ warehouse.location }}</span>
          </div>
          <div class="info-item" *ngIf="warehouse.managerName">
            <span class="icon">๐ค</span>
            <span class="label">ุงููุณุคูู:</span>
            <span class="value">{{ warehouse.managerName }}</span>
          </div>
          <div class="info-item" *ngIf="warehouse.accountId">
            <span class="icon">๐ฐ</span>
            <span class="label">ุงูุญุณุงุจ:</span>
            <span class="value">{{ getAccountName(warehouse.accountId) }}</span>
          </div>
          <div class="info-item" *ngIf="warehouse.group">
            <span class="icon">๐</span>
            <span class="label">ุงููุฌููุนุฉ:</span>
            <span class="value">{{ warehouse.group.name }}</span>
          </div>
        </div>
        
        <p class="description" *ngIf="warehouse.description">{{ warehouse.description }}</p>
        
        <div class="card-footer">
          <span 
            class="status-badge" 
            [class.active]="warehouse.isActive"
            [class.inactive]="!warehouse.isActive"
            (click)="toggleStatus(warehouse)"
          >
            {{ warehouse.isActive ? 'ูุดุท' : 'ุบูุฑ ูุดุท' }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="filteredWarehouses.length === 0">
    <div class="empty-icon">๐ญ</div>
    <h3>ูุง ุชูุฌุฏ ูุฎุงุฒู</h3>
    <p>ูู ุจุฅุถุงูุฉ ุฃูู ูุฎุฒู</p>
    <button class="btn-primary" (click)="openModal()">ุฅุถุงูุฉ ูุฎุฒู</button>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ isEditMode ? 'ุชุนุฏูู ูุฎุฒู' : 'ุฅุถุงูุฉ ูุฎุฒู ุฌุฏูุฏ' }}</h2>
      <button class="btn-close" (click)="closeModal()">โ</button>
    </div>
    
    <div class="modal-body">
      <div class="form-group">
        <label>ุงุณู ุงููุฎุฒู *</label>
        <input type="text" [(ngModel)]="currentWarehouse.name" placeholder="ูุซุงู: ูุฎุฒู ุงูููุงุฏ ุงูุฎุงู" />
      </div>

      <div class="form-group">
        <label>ุงูููุฏ *</label>
        <input type="text" [(ngModel)]="currentWarehouse.code" placeholder="ูุซุงู: WH-001" />
      </div>

      <div class="form-group">
        <label>ุงููุฌููุนุฉ</label>
        <select [(ngModel)]="currentWarehouse.groupId">
          <option [value]="undefined">ุงุฎุชุฑ ูุฌููุนุฉ...</option>
          <option *ngFor="let group of warehouseGroups" [value]="group.id">
            {{ group.code }} - {{ group.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>ุงูุญุณุงุจ ุงููุฑุชุจุท</label>
        <select [(ngModel)]="currentWarehouse.accountId">
          <option [value]="undefined">ุงุฎุชุฑ ุญุณุงุจ...</option>
          <option *ngFor="let account of accounts" [value]="account.id">
            {{ account.code }} - {{ account.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>ุงููููุน</label>
        <input type="text" [(ngModel)]="currentWarehouse.location" placeholder="ูุซุงู: ุงูููุทูุฉ ุงูุตูุงุนูุฉ - ุงููุจูู A" />
      </div>

      <div class="form-group">
        <label>ุงุณู ุงููุณุคูู</label>
        <input type="text" [(ngModel)]="currentWarehouse.managerName" placeholder="ูุซุงู: ุฃุญูุฏ ูุญูุฏ" />
      </div>

      <div class="form-group">
        <label>ุงููุตู</label>
        <textarea [(ngModel)]="currentWarehouse.description" rows="3" placeholder="ูุตู ุงููุฎุฒู..."></textarea>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="currentWarehouse.isActive" />
          <span>ูุดุท</span>
        </label>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeModal()">ุฅูุบุงุก</button>
      <button class="btn-primary" (click)="saveWarehouse()">
        {{ isEditMode ? 'ุชุญุฏูุซ' : 'ุญูุธ' }}
      </button>
    </div>
  </div>
</div>
